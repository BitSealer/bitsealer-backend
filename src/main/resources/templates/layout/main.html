<!-- templates/layout/main.html -->
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:fragment="layout (title, page_content, head_extra, body_end)">

<head>
  <meta charset="UTF-8">

  <!-- título dinámico -->
  <title th:text="${title} ?: 'BitSealer'">BitSealer</title>

  <!-- ===== CSS principales del theme ===== -->
  <link th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet">
  <link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

  <!-- Página que añada CSS extra -->
  <th:block th:replace="${head_extra}"></th:block>
</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- ===== Sidebar (izquierda) ===== -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
      <!-- Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" th:href="@{/}">
        <div class="sidebar-brand-icon rotate-n-15">
          <i class="fas fa-lock"></i>
        </div>
        <div class="sidebar-brand-text mx-3">BitSealer</div>
      </a>

      <hr class="sidebar-divider my-0">

      <!-- Enlaces -->
      <li class="nav-item">
        <a class="nav-link" th:href="@{/upload}">
          <i class="fas fa-file-upload"></i>
          <span>Subir Archivo</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" th:href="@{/history}">
          <i class="fas fa-history"></i>
          <span>Historial</span>
        </a>
      </li>
    </ul>

    <!-- ===== Contenedor principal (topbar + contenido) ===== -->
    <div id="content-wrapper" class="d-flex flex-column">
      <div id="content">

        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
          <!-- Botón Sidebar (mobile) -->
          <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
            <i class="fa fa-bars"></i>
          </button>

          <!-- Texto “Hola, user” -->
          <ul class="navbar-nav ml-auto">
            <li class="nav-item dropdown no-arrow">
              <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                 data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span class="mr-2 d-none d-lg-inline text-gray-600 small"
                      sec:authentication="name">Usuario</span>
                <i class="fas fa-user-circle fa-lg"></i>
              </a>
              <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                   aria-labelledby="userDropdown">
                <form th:action="@{/logout}" method="post">
                  <button class="dropdown-item">
                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                    Cerrar sesión
                  </button>
                </form>
              </div>
            </li>
          </ul>
        </nav>

        <!-- ===== Zona de contenido específica de cada página ===== -->
        <div class="container-fluid px-4" th:replace="${page_content}">
          <!-- Contenido inyectado -->
        </div>

      </div>
    </div>
  </div>

  <!-- ===== JS ===== -->
  <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
  <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
  <script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>
  <script th:src="@{/js/sb-admin-2.min.js}"></script>

  <th:block th:replace="${body_end}"></th:block>
</body>
</html>
